micronaut:
  application:
    name: yappy-engine-integration-test
    instance-id: engine-test-${random.uuid}
  server:
    port: -1  # Random port
  metrics:
    enabled: false
  test-resources:
    enabled: true
    client:
      timeout: 60s

# Enable Consul for integration test
consul:
  client:
    enabled: true
    registration:
      enabled: false  # Don't register the test itself as a service
    discovery:
      enabled: true

# Kafka configuration for integration test
kafka:
  bootstrap:
    servers: localhost:9092
  consumers:
    engine-test:
      auto:
        offset:
          reset: earliest
      enable:
        auto:
          commit: false

# Application configuration
app:
  config:
    cluster-name: test-cluster
    consul:
      key-prefixes:
        pipeline-clusters: pipeline-configs/clusters
        schema-versions: pipeline-configs/schemas/versions
      watch-seconds: 5
  kafka:
    slot-management:
      enabled: true  # Enable slot management for integration test
  grpc:
    server:
      port: 0  # Random port
    client:
      max-retry-attempts: 3
      retry-delay: 1s

# Logging
logger:
  levels:
    com.krickert.search.engine: DEBUG
    com.krickert.search.pipeline: DEBUG
    io.micronaut.testresources: DEBUG