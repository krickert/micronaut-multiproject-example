# ========== IMPORTER (ENTRY POINT) ==========
#pipeline.configs.pipeline1.service.tika-parser.kafka-listen-topics=input-documents
pipeline.configs.pipeline1.service.tika-parser.kafka-publish-topics=tika-documents
#pipeline.configs.pipeline1.service.tika-parser.grpc-forward-to=chunker

# ========== SERVICE CONFIGURATION ==========
pipeline.service-name=chunker

# ========== KAFKA CONFIGURATION ==========
kafka.consumer.dynamic.enabled=true

# ========== IMPORTER (ENTRY POINT) ==========
#pipeline.configs.pipeline1.service.importer.kafka-listen-topics=input-documents
pipeline.configs.pipeline1.service.importer.kafka-publish-topics=input-documents
#pipeline.configs.pipeline1.service.importer.grpc-forward-to=chunker

# ========== CHUNKER ==========
pipeline.configs.pipeline1.service.chunker.kafka-listen-topics[0]=solr-documents
pipeline.configs.pipeline1.service.chunker.kafka-listen-topics[1]=input-documents
pipeline.configs.pipeline1.service.chunker.kafka-listen-topics[2]=tika-documents
pipeline.configs.pipeline1.service.chunker.kafka-publish-topics=chunker-results
#pipeline.configs.pipeline1.service.chunker.grpc-forward-to=embedder

# ========== EMBEDDER ==========
pipeline.configs.pipeline1.service.embedder.kafka-listen-topics=chunker-results
pipeline.configs.pipeline1.service.embedder.kafka-publish-topics=enhanced-documents
#pipeline.configs.pipeline1.service.embedder.grpc-forward-to=solr-indexer

# ========== SOLR-INDEXER (FINAL STAGE) ==========
pipeline.configs.pipeline1.service.solr-indexer.kafka-listen-topics=enhanced-documents
pipeline.configs.pipeline1.service.solr-indexer.grpc-forward-to=null

# ========== PIPELINE 2 CONFIGURATION ==========
# ========== CHUNKER (PIPELINE 2) ==========
pipeline.configs.pipeline2.service.chunker.kafka-listen-topics=test-input-documents2
pipeline.configs.pipeline2.service.chunker.kafka-publish-topics=chunker-results2

# ========== EMBEDDER (PIPELINE 2) ==========
pipeline.configs.pipeline2.service.embedder.kafka-listen-topics=chunker-results2
pipeline.configs.pipeline2.service.embedder.kafka-publish-topics=enhanced-documents2

# ========== SOLR-INDEXER (PIPELINE 2) ==========
pipeline.configs.pipeline2.service.solr-indexer.kafka-listen-topics=enhanced-documents2
pipeline.configs.pipeline2.service.solr-indexer.grpc-forward-to=null

# ========== CONSUL CONFIGURATION ==========
# Enable Consul client
consul.client.enabled=true
# defaultZone will be set dynamically by ConsulContainer in tests
# consul.client.defaultZone=${CONSUL_HOST:localhost}:${CONSUL_PORT:8500}

# Configure Consul for configuration
consul.client.config.enabled=true
consul.client.config.format=properties
consul.client.config.path=config/pipeline

# Enable Consul watch for dynamic updates
consul.client.watch.enabled=true
# Kafka Broker Configuration
#kafka.bootstrap.servers=localhost:9092 # Your Kafka brokers

# Configuration for the Config Update Listener
kafka.config.update.listener.enabled=true
kafka.config.update.listener.topic=config-updates
kafka.config.update.listener.group-id=config-update-listeners-${micronaut.application.name}

# Optional: Define specific consumer properties for this listener if needed
# Example (uncomment and adjust if necessary):
# kafka.consumers.config-update-listeners-${micronaut.application.name}.fetch.min.bytes=1
# kafka.consumers.config-update-listeners-${micronaut.application.name}.auto.offset.reset=latest