# ========== TEST CONFIGURATION ==========
# Test-specific configuration for the chunker service

# Pipeline name and topics
pipeline.name=chunker-pipeline
pipeline.service.name=chunker-service
pipeline.listen.topics=test-pipeline-input
pipeline.publish.topics=test-pipeline-output
pipeline.service.chunker-service.kafka-listen-topics=test-pipeline-input
pipeline.service.chunker-service.kafka-publish-topics=test-pipeline-output
pipeline.service.chunker-service.grpc-forward-to=null

# Chunker service configuration
pipeline.configs.chunker-pipeline.service.chunker-service.kafka-listen-topics=test-pipeline-input
pipeline.configs.chunker-pipeline.service.chunker-service.kafka-publish-topics=test-pipeline-output
pipeline.configs.chunker-pipeline.service.chunker-service.grpc-forward-to=null
pipeline.configs.chunker-pipeline.service.chunker-service.service-implementation=chunker-service

# Chunker specific configuration for testing
pipeline.configs.chunker-pipeline.service.chunker-service.config-params.chunkSize=100
pipeline.configs.chunker-pipeline.service.chunker-service.config-params.overlapSize=20

# ========== KAFKA CONFIGURATION ==========
# Kafka configuration for testing
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
kafka.consumers.chunker-pipe-group.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer
kafka.consumers.chunker-pipe-group.value.deserializer=io.micronaut.kafka.serde.ProtobufDeserializer
kafka.producers.default.key.serializer=org.apache.kafka.common.serialization.StringSerializer
kafka.producers.default.value.serializer=io.micronaut.kafka.serde.ProtobufSerializer

# ========== APICURIO REGISTRY CONFIGURATION ==========
# Apicurio Registry configuration for testing
kafka.producers.default.apicurio.registry.url=${REGISTRY_URL:http://localhost:8080/apis/registry/v3}
kafka.producers.default.apicurio.registry.auto-register=true
kafka.producers.default.apicurio.registry.artifact-resolver-strategy=io.apicurio.registry.serde.strategy.TopicIdStrategy
kafka.producers.default.apicurio.registry.artifact-group-id=default

kafka.consumers.default.apicurio.registry.url=${REGISTRY_URL:http://localhost:8080/apis/registry/v3}
kafka.consumers.default.apicurio.registry.auto-register=true
kafka.consumers.default.apicurio.registry.artifact-resolver-strategy=io.apicurio.registry.serde.strategy.TopicIdStrategy
kafka.consumers.default.apicurio.registry.artifact-group-id=default
kafka.consumers.default.apicurio.registry.specific-value-return-class=com.krickert.search.model.PipeStream

# ========== APPLICATION CONFIGURATION ==========
# Application name for testing
micronaut.application.name=pipeline-chunker-service-test

# Logging configuration for testing
logging.level.com.krickert=DEBUG
