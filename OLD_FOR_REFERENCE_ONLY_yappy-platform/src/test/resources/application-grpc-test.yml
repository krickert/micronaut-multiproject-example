micronaut:
  application:
    name: consul-config-service-test
  server:
    port: ${random.port}
    netty:
      worker:
        shutdown-quiet-period: 0s
        shutdown-timeout: 0s
  config-client:
    enabled: false

  # OpenAPI configuration
  router:
    static-resources:
      swagger:
        paths: classpath:META-INF/swagger
        mapping: /swagger/**
      swagger-ui:
        paths: classpath:META-INF/resources/webjars/swagger-ui/4.18.2
        mapping: /swagger-ui/**

# Consul client configuration
consul:
  client:
    enabled: true
    registration:
      # Disable HTTP server registration to prevent duplicate registrations
      # Only register the gRPC server
      http-server-enabled: false
      check:
        http: false
      retry-delay: 0s
      retry-max: 0

# Enable gRPC server for this test
grpc:
  server:
    enabled: true
    port: ${random.port}

# Logging configuration
logger:
  levels:
    com.krickert.search.config.consul: DEBUG
    io.micronaut.discovery: DEBUG
    io.netty: DEBUG
    org.kiwiproject.consul: DEBUG
    io.micronaut.http.client: DEBUG

kafka:
  enabled: true
  schema:
    registry:
      type: apicurio

testcontainers:
  enabled: true
  kafka: true
  moto: false
  consul: true
  apicurio: true
